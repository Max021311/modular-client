<template>
  <div id="main-page">
    <!----- Contenido principal ----->
    <main class="flex flex-col gap-6 px-10 py-8">
      <!-- ‚ú® Tarjeta de Bienvenida -->
      <card class="card bg-base-400 rounded-lg shadow-md">
        <template #title>
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-2">
              <span class="text-2xl font-semibold text-primary">
                üëã Hola, {{ userName }}
              </span>
            </div>
          </div>
        </template>
        <template #content>
          <p class="font-bold ">
            Bienvenido al panel de gesti√≥n de tu Servicio Social. Aqu√≠ podr√°s:
          </p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Revisar el estado de tu plaza y oficios de comisi√≥n.</li>
            <li>Crear y subir reportes parciales y finales.</li>
            <li>Obtener recomendaciones de vacantes adaptadas a tu perfil.</li>
          </ul>
          <p class="text-sm font-semibold mt-4">
            Selecciona alguna de las secciones a continuaci√≥n para comenzar.
          </p>
        </template>
      </card>

      <!------ Plaza de Servicio ----->
      <card>
        <template #title>
          <div class="flex w-full justify-between items-center">
            <span class="text-center">
              Asignaci√≥n de servicio
            </span>
            <button
              class="btn btn-primary btn-sm"
              @click="openModal('service')"
            >
              Ver Detalles
            </button>
          </div>
        </template>
        <template #content>
          <!-- Informaci√≥n de la Plaza -->
          <section class="flex flex-col gap-4">
            <!-- Tarjeta de Informaci√≥n -->
            <div
              class="card bg-base-300 shadow-md w-full p-4"
            >
              <div class="card-body flex flex-col md:flex-row justify-between items-start md:items-center">
                <!-- Detalles principales -->
                <div class="flex-1">
                  <p><strong>No:</strong> 789/2024A</p>
                  <p><strong>Estatus:</strong> FINALIZADO</p>
                  <p><strong>Entidad Receptora:</strong> Unidad Administrativa</p>
                  <p><strong>Proyecto:</strong> Apoyo Administrativo</p>
                  <p><strong>√Årea:</strong> Administraci√≥n</p>
                </div>

                <!-- Detalles adicionales -->
                <div class="flex-1">
                  <p><strong>Turno</strong> Matutino</p>
                  <p><strong>Fecha de Inicio:</strong> 04/03/2024</p>
                  <p><strong>Fecha de Finalizaci√≥n:</strong> 06/09/2024</p>
                  <p><strong>Tiempo Reportado:</strong> 480 horas</p>
                </div>
              </div>
            </div>
          </section>
        </template>
      </card>

      <!----- Oficio de Comisi√≥n ----->
      <card>
        <template #title>
          <div class="flex w-full justify-between items-center">
            <span class="text-center">
              Oficio de Comisi√≥n
            </span>
            <div class="flex justify-end space-x-2">
              <button
                type="button"
                class="btn btn-activate btn-sm"
                @click="generatePDF"
              >
                Generar PDF
              </button>
              <button
                type="button"
                class="btn btn-activate btn-sm"
                @click="uploadPDF"
              >
                Cargar PDF
              </button>
              <button
                class="btn btn-primary btn-sm"
                @click="openModal('office')"
              >
                Crear Oficio
              </button>
            </div>
          </div>
        </template>
        <template #content>
          <section class="flex flex-col gap-4">
            <div class="card bg-base-300 shadow-md w-full p-4">
              <div class="card-body flex flex-col md:flex-row justify-between items-start md:items-center">
                <div class="flex-1">
                  <p><strong>No:</strong> 101/02/2024</p>
                  <p><strong>Fecha de Inicio:</strong> 04/03/2024</p>
                  <p><strong>Entidad Receptora:</strong> Unidad Administrativa</p>
                </div>
                <div class="flex-1">
                  <p><strong>Proyecto:</strong> Programa A</p>
                  <p><strong>Estatus:</strong> VALIDADO</p>
                </div>
              </div>
            </div>
          </section>
        </template>
      </card>

      <!----- Reportes Parciales ----->
      <card>
        <template #title>
          <div class="flex w-full justify-between items-center">
            <span class="text-center">
              Reportes de Avance
            </span>
            <button
              class="btn btn-primary btn-sm"
              @click="openModal('bimester-report')"
            >
              Crear Reporte
            </button>
          </div>
        </template>
        <template #content>
          <section class="flex flex-col gap-4">
            <div class="card bg-base-300 shadow-md w-full p-4">
              <div class="card-body flex flex-col md:flex-row justify-between items-start md:items-center">
                <div class="flex-1">
                  <p><strong>No:</strong> 1</p>
                  <p><strong>Fecha de Creaci√≥n:</strong> 05/05/2024</p>
                  <p><strong>Horas:</strong> 160</p>
                </div>
                <div class="flex-1">
                  <p><strong>Periodo Reportado:</strong> 04/03/2024 - 05/05/2024</p>
                  <p><strong>Estatus:</strong> VALIDADO</p>
                </div>
              </div>
            </div>
          </section>
        </template>
      </card>

      <!----- Reporte Final ----->
      <card>
        <template #title>
          <div class="flex w-full justify-between items-center">
            <span class="text-center">
              Reporte Final de Actividades
            </span>
            <button
              class="btn btn-primary btn-sm"
              @click="openModal('final-report')"
            >
              Crear Reporte
            </button>
          </div>
        </template>
        <template #content>
          <section class="flex flex-col gap-4">
            <div class="card bg-base-300 shadow-md w-full p-4">
              <div class="card-body flex flex-col md:flex-row justify-between items-start md:items-center">
                <div class="flex-1">
                  <p><strong>Fecha de Creaci√≥n:</strong> 05/05/2024</p>
                  <p><strong>Per√≠odo de Servicio:</strong> 04/03/2024 - 06/09/2024</p>
                </div>
                <div class="flex-1">
                  <p><strong>Horas Totales:</strong> 480</p>
                  <p><strong>Estatus:</strong> VALIDADO</p>
                </div>
              </div>
            </div>
          </section>
        </template>
      </card>
    </main>

    <!----- Modal ----->
    <ModalComponent
      v-model="isModalOpen"
      modal-class="w-11/12 max-w-5xl"
    >
      <div>
        <!-- T√≠tulo din√°mico -->
        <h3 class="text-lg font-bold text-center">
          <span v-if="modalSection === 'service'">Detalles de la Asignaci√≥n de Servicio</span>
          <span v-else-if="modalSection === 'office'">Oficio de Comisi√≥n</span>
          <span v-else-if="modalSection === 'bimester-report'">Reporte de Avance</span>
          <span v-else-if="modalSection === 'final-report'">Reporte Final de Actividades</span>
        </h3>

        <!-- Contenido din√°mico -->
        <div class="py-4">
          <div v-if="modalSection === 'service'">
            <!-- Informaci√≥n de Plaza -->
            <div class="flex flex-col gap-4">
              <div class="card bg-base-300 shadow-md w-full p-4">
                <div class="card-body flex flex-col md:flex-row justify-between items-start md:items-center">
                  <!-- Informaci√≥n principal -->
                  <div class="flex-1">
                    <p><strong>Nombre de la Plaza:</strong> Plaza Administrativa</p>
                    <p><strong>Ubicaci√≥n:</strong> Unidad Administrativa</p>
                    <p><strong>Estatus:</strong> Activo</p>
                  </div>
                  <div class="flex-1">
                    <p><strong>Fecha de Inicio:</strong> 01/01/2025</p>
                    <p><strong>Fecha de Fin:</strong> 31/12/2025</p>
                  </div>
                </div>
              </div>
              <p>
                <!-- Informaci√≥n adicional, esta secci√≥n es opcional -->
                Esta plaza est√° enfocada en actividades administrativas que incluyen la gesti√≥n de archivos, apoyo en eventos y coordinaci√≥n de recursos internos.
              </p>
            </div>
          </div>

          <!-- Oficio -->
          <div class="py-4">
            <form
              v-if="modalSection === 'office'"
              @submit.prevent="submitForm"
            >
              <p>
                Por favor, llena los siguientes campos para crear un oficio de comisi√≥n, llena con cuidado cada campo para evitar errores.
              </p>

              <label class="block">
                <span class="font-bold">Fecha de Inicio:</span>
                <input
                  v-model="formData.startDate"
                  type="date"
                  class="input input-bordered w-full mt-1"
                >
              </label>
              <label class="block mt-4">
                <span class="font-bold">Lugar de la Entidad Receptora:</span>
                <input
                  v-model="formData.dependencia"
                  type="text"
                  placeholder="Ejemplo: Unidad Administrativa"
                  class="input input-bordered w-full mt-1"
                >
              </label>
              <button
                type="submit"
                class="btn btn-primary flex justify-center mx-auto mt-4"
              >
                Guardar
              </button>
            </form>

            <!-- Reportes -->
            <form
              v-else-if="modalSection === 'bimester-report'"
              @submit.prevent="submitForm"
            >
              <p>
                Por favor, llena los siguientes campos para crear un nuevo reporte bimestral, llena con cuidado cada campo para evitar errores.
              </p>
              <label class="block">
                <span class="font-bold">Per√≠odo Reportado:</span>
                <div class="flex gap-2 mt-1">
                  <input
                    v-model="formData.startDate"
                    type="date"
                    class="input input-bordered w-full"
                  >
                  <span class="text-lg font-bold">-</span>
                  <input
                    v-model="formData.endDate"
                    type="date"
                    class="input input-bordered w-full"
                  >
                </div>
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øConsideras que cumpliste con los objetivos propuestos?</span>
                <textarea
                  v-model="formData.activities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øQu√© habilidades crees que has mejorado durante tu servicio social?</span>
                <textarea
                  v-model="formData.activities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øQu√© aspectos fueron m√°s satisfactorios de tu servicio social?</span>
                <textarea
                  v-model="formData.activities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øRecomendar√≠as esta entidad para realizar el servicio social? ¬øPor qu√©?</span>
                <textarea
                  v-model="formData.activities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øCu√°les fueron las principales actividades que realizaste?</span>
                <textarea
                  v-model="formData.activities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <button
                type="submit"
                class="btn btn-primary flex justify-center mx-auto mt-4"
              >
                Crear
              </button>
            </form>

            <!-- Reporte Final -->
            <form
              v-else-if="modalSection === 'final-report'"
              @submit.prevent="submitForm"
            >
              <p>
                Por favor, llena los siguientes campos para crear el reporte final, llena con cuidado cada campo para evitar errores.
              </p>
              <label class="block">
                <span class="font-bold">Per√≠odo del Servicio:</span>
                <div class="flex gap-2 mt-1">
                  <input
                    v-model="formData.startDate"
                    type="date"
                    class="input input-bordered w-full"
                  >
                  <span class="text-lg font-bold">-</span>
                  <input
                    v-model="formData.endDate"
                    type="date"
                    class="input input-bordered w-full"
                  >
                </div>
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øCu√°les fueron las actividades m√°s relevantes que realizaste?</span>
                <textarea
                  v-model="formData.relevantActivities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øQu√© habilidades profesionales desarrollaste durante tu servicio social?</span>
                <textarea
                  v-model="formData.relevantActivities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øCu√°les fueron tus logros m√°s importantes durante tu servicio?</span>
                <textarea
                  v-model="formData.relevantActivities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <label class="block mt-4">
                <span class="font-bold">¬øQu√© recomendaciones har√≠as a la entidad donde realizaste tu servicio social?</span>
                <textarea
                  v-model="formData.relevantActivities"
                  class="textarea textarea-bordered w-full mt-1"
                />
              </label>
              <button
                type="submit"
                class="btn btn-primary flex justify-center mx-auto mt-4"
              >
                Crear
              </button>
            </form>
          </div>
        </div>
      </div>
    </modalcomponent>
  </div>
</template>

<script lang="ts">
export default {
  data() {
    return {
      userName: 'Usuario', // Despu√©s de la autenticaci√≥n, este valor se actualizar√°
      isModalOpen: false,
      modalSection: '',
      formData: {
        startDate: '',
        dependencia: '',
        endDate: '',
        activities: '',
        objectives: '',
        goalsAchieved: '',
        skills: '',
        contribution: '',
        satisfaction: '',
        recommendation: '',
        relevantActivities: '',
        objectivesAchieved: '',
        professionalSkills: '',
        keyAchievements: '',
        valuableAspects: '',
        recommendations: ''
      }
    }
  },
  methods: {
    logout() {
      this.$router.push({ name: 'SignIn' })
    },
    viewDetails() {
      console.log('Ver detalles de plaza:')
      // L√≥gica para mostrar detalles adicionales
    },
    openModal(section: string) {
      this.modalSection = section
      this.isModalOpen = true
    },
    closeModal() {
      this.isModalOpen = false
    },
    submitForm() {
      console.log('Formulario enviado:', this.formData)
      this.closeModal()
    },
    generatePDF() {
      console.log('Generando PDF con datos:', this.formData)
      // L√≥gica para generar PDF
    },
    uploadPDF() {
      console.log('Cargando PDF...')
      // L√≥gica para cargar PDF
    }
  }
}
</script>

<style scoped>
/* Estilos generales */
#main-page {
  font-family: Arial, sans-serif;
}

.card {
  transition: transform 0.2s, box-shadow 0.2s;
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

button[type="submit"] {
  transition: background-color 0.3s ease;
}
</style>
